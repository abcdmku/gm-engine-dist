{"version":3,"file":"main.js","mappings":"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","sources":["webpack://game-mr/./apps/engine/src/main.ts","webpack://game-mr/./libs/core-components/src/lib/lobby/serverLogic.ts","webpack://game-mr/./libs/game/number-game/src/lib/helpers.ts","webpack://game-mr/./libs/game/number-game/src/lib/serverLogic.ts","webpack://game-mr/external commonjs \"@socket.io/admin-ui\"","webpack://game-mr/external commonjs \"socket.io\"","webpack://game-mr/external commonjs \"tslib\"","webpack://game-mr/webpack/bootstrap","webpack://game-mr/webpack/before-startup","webpack://game-mr/webpack/startup","webpack://game-mr/webpack/after-startup"],"sourcesContent":["import { Message, User } from '@game-mr/helpers';\r\nimport { instrument } from '@socket.io/admin-ui';\r\nimport { Namespace, Server, Socket as SocketType } from 'socket.io';\r\nimport { DefaultEventsMap } from 'socket.io/dist/typed-events';\r\nimport { LobbyLogic } from 'libs/core-components/src/lib/lobby/serverLogic';\r\nimport { ServerLogic as ngLogic } from 'libs/game/number-game/src/lib/serverLogic'\r\n\r\nconst io = new Server(3000, {\r\n  cors: {\r\n    origin: [/(localhost)./, /(minerva.us)/, /(ravenwood.io)/, \"https://admin.socket.io\", /()/],\r\n    credentials: true\r\n  },\r\n});\r\n\r\ninstrument(io, {\r\n  auth: false\r\n});\r\nexport type ServerIO = Server<DefaultEventsMap, DefaultEventsMap, DefaultEventsMap, any>;\r\nexport type Game = Namespace<DefaultEventsMap, DefaultEventsMap, DefaultEventsMap, any>;\r\nexport type Socket = SocketType<DefaultEventsMap, DefaultEventsMap, DefaultEventsMap, any>\r\n\r\nconst randomString = (int) => Array.from(Array(int), () => Math.floor(Math.random() * 36).toString(36)).join('');\r\nconst omit = (obj, keys) => Object.keys(obj).filter((k) => !keys.includes(k)).reduce((res, k) => Object.assign(res, { [k]: obj[k] }), {});\r\ntype gameLogicProps = (game: Game, socket: Socket, io?: ServerIO) => void\r\n\r\ninterface gameMapProps { \r\n  name: string;\r\n  logic: null | gameLogicProps;\r\n}\r\n\r\nconst Games: gameMapProps[] = [\r\n  {name: '/', logic: null},\r\n  {name: 'lobby', logic: LobbyLogic},\r\n  {name: 'area', logic: null},\r\n  {name: 'stellcon', logic: null},\r\n  {name: 'number-game', logic: ngLogic},\r\n]\r\n\r\nlet users: User[] = [];\r\n\r\nexport const validUserName = (name) => /^([a-zA-Z0-9_-]){1,10}$/.test(name);\r\nexport const uniqueUserName = (name) => !users.some(u => u.name === name);\r\nconst userLoggedIn = (user:User) => users.filter(u => isEqual(u,user));\r\n\r\nconst isEqual = (...objects) => objects.every((obj) => JSON.stringify(obj) === JSON.stringify(objects[0]));\r\n\r\nexport interface RoomData {\r\n  name: string;\r\n  players: string[];\r\n  watchers: string[];\r\n}\r\n\r\nconst getRoomData = async (game:Game) => {\r\n  const rooms:RoomData[] = [];\r\n\r\n  const gameRooms = await game.adapter.rooms;\r\n  for await (const [roomName] of gameRooms) {\r\n    if(true) {\r\n      const players: string[] = [];\r\n      const watchers: string[] = [];\r\n      game.in(roomName).fetchSockets().then(async sockets => {\r\n        sockets.forEach(async s => {\r\n          const isPlayer = s.data.playing?.includes(roomName);\r\n          isPlayer ? players.push(s.data.user.name) : watchers.push(s.data.user.name);\r\n        })\r\n      })\r\n      rooms.push({ name: roomName, players: players, watchers: watchers });\r\n    }\r\n  }\r\n  return rooms;\r\n}\r\n\r\nconst getRoomUsers = async (game:Game, room: string) => {\r\n  const users:User[] = [];\r\n  await game.in(room).fetchSockets().then(sockets => \r\n    sockets.forEach(s =>users.push(omit(s.data.user,['token']) as User))\r\n  )\r\n  return users\r\n}\r\n\r\nconst cleanUpUsers = () => {\r\n\r\n}\r\n\r\nGames.map(gameInfo =>{\r\n  const game = io.of(gameInfo.name);\r\n\r\n  let messages: Message[] = [];\r\n  \r\n  game.use((socket, next) => {\r\n    const requestedUser = socket.handshake.auth as User;\r\n    if(requestedUser?.token) {\r\n      const loggedin = userLoggedIn(requestedUser);\r\n      if(loggedin) socket.data.user = requestedUser\r\n    } else {\r\n      if(!validUserName(requestedUser.name)) return new Error(\"Username must be 1 to 10 alphanumeric characters long\");\r\n      if(!uniqueUserName(requestedUser.name)) return new Error(\"User already exists\");\r\n      const user = {name:requestedUser.name, id: socket.id, token:randomString(20)}\r\n      socket.data.user = user\r\n      users.push(user);\r\n    }\r\n    next();\r\n  });\r\n\r\n  game.on('connection', async (socket) => {\r\n    const user = socket.data.user as User;\r\n    \r\n    game.to(user.id).emit('joined', user)\r\n\r\n    game.emit('rooms', await getRoomData(game));\r\n\r\n    socket.on(\"disconnect\",  () => {\r\n      socket.data.playing?.forEach(async (r) => {\r\n        const message: Message = {room: r, name: 'System', message: `${user.name} left room ${r} for ${game.name}`}\r\n        messages.unshift(message);\r\n        \r\n        game.to(r).emit('message', messages.filter(m => m.room === r));\r\n        game.to(r).emit('users', await getRoomUsers(game, r))\r\n      })\r\n    });\r\n\r\n    socket.on(('joinRoom'), async ({room = randomString(4), joinAsPlayer}, callback) => {\r\n      const roomUsers = await getRoomUsers(game, room)\r\n        const joinedBefore = roomUsers.some(r => r.name === socket.data.user.name);\r\n\r\n        if(joinAsPlayer) {\r\n          const roomsAsPlayer = socket.data.playing?.length ? socket.data.playing : []\r\n          socket.data.playing = [...roomsAsPlayer, room]\r\n        }\r\n\r\n        socket.join(room);\r\n        const message: Message = {room: room, name: 'System', message: `${user.name} joining room ${room} for ${game.name}`}\r\n        messages.unshift(message);\r\n        game.to(room).emit('message',  messages.filter(m => m.room === room));\r\n        game.to(room).emit('users', await getRoomUsers(game, room))\r\n        callback(room);\r\n\r\n    });\r\n\r\n    socket.on(\"message\", async ({room = '', message: incomingMsg}) => {\r\n      const message: Message = {room: room, name:user.name, message: incomingMsg}\r\n      messages.unshift(message);\r\n      game.to(room).emit('message',  messages.filter(m => m.room === room));\r\n      game.to(room).emit('users', await getRoomUsers(game, room))\r\n\r\n    });\r\n\r\n    if (gameInfo.logic) game.name === 'lobby' ? gameInfo.logic(game, socket, io) : gameInfo.logic(game, socket); \r\n  })\r\n})\r\n","import { ServerSocket, Game, ServerIO } from \"@game-mr/helpers\";\r\n\r\nconst randomString = (int) => Array.from(Array(int), () => Math.floor(Math.random() * 36).toString(36)).join('');\r\n\r\nexport interface RoomData {\r\n  name: string;\r\n  players: string[];\r\n  watchers: string[];\r\n}\r\n\r\nexport const LobbyLogic = (lobby:Game, socket:ServerSocket, io: ServerIO) => {\r\n  const getRoomData = async (gameName:string) => {\r\n    const rooms:RoomData[] = [];\r\n    const gameNameSpace = io.of(gameName);\r\n\r\n    const gameRooms = await gameNameSpace.adapter.rooms;\r\n    for await (const [roomName] of gameRooms) {\r\n      const players: string[] = [];\r\n      const watchers: string[] = [];\r\n      lobby.in(roomName).fetchSockets().then(async sockets => {\r\n        sockets.forEach(async s => {\r\n          const isPlayer = s.data.playing?.includes(roomName);\r\n          isPlayer ? players.push(s.data.userName) : watchers.push(s.data.userName);\r\n        })\r\n      })\r\n      rooms.push({ name: roomName, players: players, watchers: watchers });\r\n    }\r\n    return rooms;\r\n  }\r\n\r\n  socket.on('getRooms', async (game) => {\r\n    socket.emit('rooms', await getRoomData(game));\r\n  });\r\n}\r\n","import { User } from \"@game-mr/helpers\";\r\n\r\nexport const validGuess = (guess:string) => /^(\\d)(?!.*\\1)(\\d)(?!.*\\2)(\\d)(?!.*\\3)(\\d)(?!.*\\4)\\d$/.test(guess)\r\nexport const dupeCheck = (guess: string, guesses: string[]) => guesses.some(g => g === guess)\r\nexport const numcheck = (number, guess) => {\r\n  let p = 0, n = 0;\r\n  for (let i = 0; i < 5; i++) guess.indexOf(number.charAt(i)) !== -1 && (guess.charAt(i) == number.charAt(i) ? p++ : n++)\r\n  return {guess: guess, p: p, n: n };\r\n}\r\n\r\nexport const playerNumber = (players: roomDataProps['players'], player: User) => Object.entries(players).findIndex(([_,v]) => v.user.id === player.id) + 1;\r\n\r\n//  return v.User.id === player.id && k\r\n\r\nexport interface guess {\r\n  guess: string;\r\n  n: number;\r\n  p: number;\r\n}\r\n\r\nexport interface roomDataProps {\r\n  players: { \r\n    [x:number]:{\r\n      user: User,\r\n      guesses: guess[];\r\n      number: string;\r\n    }\r\n  }\r\n  maxPlayers: number;\r\n  turn: number;\r\n  state: gameState;\r\n}\r\n\r\nexport const roomInitState = {\r\n  players: {},\r\n  maxPlayers: 2,\r\n  turn: 2,\r\n  state: 0\r\n} as roomDataProps;\r\n\r\nexport const playerInitState = {\r\n  user: {} as User,\r\n  guesses: [],\r\n  number: ''\r\n}\r\n\r\nexport enum gameState {\r\n  open = 0,\r\n  initalizing = 1,\r\n  playing = 2,\r\n  finished = 3\r\n}\r\n\r\n","import { ServerSocket, Game, User } from \"@game-mr/helpers\";\r\nimport { validGuess, roomDataProps, roomInitState, numcheck, dupeCheck, gameState, playerNumber, guess, playerInitState } from \"./helpers\";\r\n\r\nexport const serverState = {\r\n  roomData: <{[x:string]:roomDataProps}> {},\r\n  initRoom (room:string) {if(!this.roomData.hasOwnProperty(room)) this.roomData[room] = JSON.parse(JSON.stringify(roomInitState))},\r\n  addUser (room:string, player: User) { for (let i = 1; i <= this.roomData[room].maxPlayers; i++) { if(!this.roomData[room].players.hasOwnProperty(i) && this.roomData[room].players[i - 1]?.user.id !== player.id) {this.roomData[room].players[i] = JSON.parse(JSON.stringify({...playerInitState, user: player}));return i}}},\r\n  deleteRoom (room:string) {delete this.roomData[room]},\r\n  addGuess (room: string, player: User, guess:guess) {this.roomData[room].players[this.getPlayerNumber(room, player)].guesses.push(guess)},\r\n  getPlayerGuesses (room: string, player: User) {return this.roomData[room].players[this.getPlayerNumber(room, player)].guesses.map(o => o['guess'])},\r\n  setRoomState (room: string, state: gameState) { this.roomData[room].state = state},\r\n  getPlayerNumber (room: string, player: User) { return playerNumber(this.roomData[room].players, player)},\r\n  setPlayerNumber (room: string, player: User, number: string) {this.roomData[room].players[this.getPlayerNumber(room, player)].number = number}, \r\n  playersAddedNumbers (room: string) { let numbersAdded = 0; Object.values(this.roomData[room].players).map((v:any) => v.number !== '' && numbersAdded++); return numbersAdded === this.roomData[room].maxPlayers}\r\n}\r\n\r\nexport const ServerLogic = (game:Game, socket:ServerSocket) => {\r\n  socket.on('getServerState', () => {\r\n    socket.emit('serverState', serverState);\r\n  })\r\n\r\n  socket.on('joinedRoom', (data) => {\r\n    serverState.initRoom(data.room);\r\n    console.log(roomInitState)\r\n    const playerAdded = serverState.addUser(data.room, data.player)\r\n    playerAdded === serverState.roomData[data.room].maxPlayers && serverState.setRoomState(data.room, gameState.initalizing)\r\n    playerAdded \r\n      ? game.to(data.room).emit('roomData', serverState.roomData[data.room])\r\n      : socket.emit('roomData', serverState.roomData[data.room]);\r\n  });\r\n\r\n  socket.on('setNumber', (data) => {\r\n    if(!validGuess(data.number)) {game.to(socket.id).emit('guessError', 'Number must be 5 unique digits'); return}\r\n    serverState.setPlayerNumber(data.room, data.player, data.number)\r\n    if(serverState.playersAddedNumbers(data.room)) {\r\n      serverState.setRoomState(data.room, gameState.playing);\r\n      game.to(data.room).emit('roomData', serverState.roomData[data.room]);\r\n    }\r\n  });\r\n\r\n  socket.on('guess', (data, callback) => {\r\n    if(!validGuess(data.guess)) {game.to(socket.id).emit('guessError', 'Guess must be 5 unique numbers'); return}\r\n    if(dupeCheck(data.guess, serverState.getPlayerGuesses(data.room, data.player))) {game.to(socket.id).emit('guessError', 'You guessed that already'); return}\r\n\r\n    serverState.addGuess(data.room, data.player, numcheck('12345', data.guess))\r\n\r\n    game.to(data.room).emit('roomData', serverState.roomData[data.room]);\r\n    callback(data);\r\n    socket.emit('serverState', serverState);\r\n\r\n  });\r\n\r\n}\r\n","module.exports = require(\"@socket.io/admin-ui\");","module.exports = require(\"socket.io\");","module.exports = require(\"tslib\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./apps/engine/src/main.ts\");\n",""],"names":[],"sourceRoot":""}